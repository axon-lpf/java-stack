# ğŸ” **`new String("ab")` ä¸ `x+"b"` çš„å…³é”®åŒºåˆ«**

## ğŸ¯ **ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä½†è¿™ä¸¤ç§æƒ…å†µä¸åŒï¼**

## ğŸ“ **æƒ…å†µå¯¹æ¯”åˆ†æ**

### **æƒ…å†µ1: `new String("ab")` - ä¼šåˆ›å»ºä¸¤ä¸ªå¯¹è±¡**

```java
String s = new String("ab");
```

**åˆ›å»ºè¿‡ç¨‹ï¼š**
```java
// Step 1: å­—é¢é‡ "ab" æ£€æŸ¥å¸¸é‡æ± 
// å¦‚æœå¸¸é‡æ± ä¸­æ²¡æœ‰ "ab"ï¼Œåˆ™åˆ›å»ºå¹¶æ”¾å…¥å¸¸é‡æ± 
String literal = "ab";  // å¸¸é‡æ± ä¸­çš„å¯¹è±¡@2001

// Step 2: é€šè¿‡æ„é€ å‡½æ•°åœ¨å †ä¸­åˆ›å»ºæ–°å¯¹è±¡
String s = new String("ab");  // å †ä¸­çš„å¯¹è±¡@2002ï¼Œå¤åˆ¶å¸¸é‡æ± å†…å®¹
```

### **æƒ…å†µ2: `x + "b"` - åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡**

```java
String x = "a";
String s = x + "b";
```

**åˆ›å»ºè¿‡ç¨‹ï¼š**
```java
// ç¼–è¯‘å™¨è½¬æ¢ä¸ºï¼š
StringBuilder sb = new StringBuilder();
sb.append(x);      // append("a")
sb.append("b");    // append("b") 
String s = sb.toString();  // ğŸ”‘ å…³é”®ï¼šç›´æ¥ new String(char[], int, int)
```

## ğŸ”¬ **StringBuilder.toString() æºç åˆ†æ**

```java
// StringBuilder.toString() çš„å®é™…å®ç°
@Override
public String toString() {
    // ğŸ”‘ å…³é”®ï¼šç›´æ¥é€šè¿‡charæ•°ç»„æ„é€ ï¼Œæ²¡æœ‰ç»è¿‡å­—ç¬¦ä¸²å­—é¢é‡ï¼
    return new String(value, 0, count);
}

// å¯¹æ¯”ï¼šStringæ„é€ å‡½æ•°çš„ä¸¤ç§å½¢å¼
public String(String original) {           // new String("ab") ä½¿ç”¨è¿™ä¸ª
    // ä¼šå¼•ç”¨å­—é¢é‡å¸¸é‡æ± 
}

public String(char value[], int offset, int count) {  // toString()ä½¿ç”¨è¿™ä¸ª
    // ç›´æ¥ä»charæ•°ç»„åˆ›å»ºï¼Œä¸æ¶‰åŠå¸¸é‡æ± 
}
```

## ğŸ—ºï¸ **å†…å­˜åˆ›å»ºè¿‡ç¨‹å¯¹æ¯”å›¾**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æƒ…å†µ1: new String("ab")                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 1: å¤„ç†å­—é¢é‡"ab"                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              å­—ç¬¦ä¸²å¸¸é‡æ±                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚  "ab" â†’ String@2001  âœ… å¯¹è±¡1                       â”‚ â”‚
â”‚  â”‚  â”‚  value: ['a','b']                                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Step 2: new String() æ„é€ å‡½æ•°                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   å †å†…å­˜                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚  String@2002  âœ… å¯¹è±¡2                              â”‚ â”‚
â”‚  â”‚  â”‚  value: ['a','b'] (å¤åˆ¶è‡ªå¸¸é‡æ± )                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æƒ…å†µ2: x + "b"                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­—ç¬¦ä¸²å¸¸é‡æ±  (å·²å­˜åœ¨çš„)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  "a" â†’ String@3001 (xæŒ‡å‘)                             â”‚ â”‚
â”‚  â”‚  "b" â†’ String@3002 (å­—é¢é‡)                            â”‚ â”‚
â”‚  â”‚  âŒ æ²¡æœ‰"ab" (ä¸ä¼šè‡ªåŠ¨åˆ›å»º)                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  StringBuilder å¤„ç†è¿‡ç¨‹                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   å †å†…å­˜                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚  StringBuilder@4001                                â”‚ â”‚
â”‚  â”‚  â”‚  â†’ append("a") â†’ append("b")                       â”‚ â”‚
â”‚  â”‚  â”‚  â†’ toString() â†’ new String(char[], 0, 2)          â”‚ â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  â”‚  String@4002  âœ… å”¯ä¸€å¯¹è±¡                          â”‚ â”‚
â”‚  â”‚  â”‚  value: ['a','b'] (ä»StringBuilderçš„char[]å¤åˆ¶)    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **éªŒè¯ä»£ç **

```java
public class StringCreationTest {
    public static void main(String[] args) {
        // æƒ…å†µ1: new String("ab") - ä¸¤ä¸ªå¯¹è±¡
        String s1 = new String("ab");
        String s2 = "ab";  // ä»å¸¸é‡æ± è·å–
        
        System.out.println("=== new String(\"ab\") æƒ…å†µ ===");
        System.out.println("s1 == s2: " + (s1 == s2));  // false (ä¸åŒå¯¹è±¡)
        System.out.println("s1.equals(s2): " + (s1.equals(s2)));  // true
        System.out.println("s1.intern() == s2: " + (s1.intern() == s2));  // true
        
        // æƒ…å†µ2: x + "b" - ä¸€ä¸ªå¯¹è±¡
        String x = "a";
        String s3 = x + "b";  // StringBuilderå¤„ç†
        String s4 = "ab";     // ä»å¸¸é‡æ± è·å–
        
        System.out.println("\n=== x + \"b\" æƒ…å†µ ===");
        System.out.println("s3 == s4: " + (s3 == s4));  // false (ä¸åŒå¯¹è±¡)
        System.out.println("s3.equals(s4): " + (s3.equals(s4)));  // true
        System.out.println("s3.intern() == s4: " + (s3.intern() == s4));  // true
        
        // éªŒè¯å¯¹è±¡åˆ›å»ºæ•°é‡
        System.out.println("\n=== å†…å­˜åœ°å€éªŒè¯ ===");
        System.out.println("s1: " + System.identityHashCode(s1));
        System.out.println("s2: " + System.identityHashCode(s2));
        System.out.println("s3: " + System.identityHashCode(s3));
        System.out.println("s4: " + System.identityHashCode(s4));
        System.out.println("s2 == s4: " + (s2 == s4));  // true (éƒ½æ˜¯å¸¸é‡æ± )
    }
}
```

## ğŸ“Š **å…³é”®åŒºåˆ«æ€»ç»“**

| å­—ç¬¦ä¸²åˆ›å»ºæ–¹å¼ | å¯¹è±¡æ•°é‡ | å¸¸é‡æ± æ“ä½œ | å †å¯¹è±¡ | åŸå›  |
|----------------|----------|------------|---------|------|
| `new String("ab")` | 2ä¸ª | âœ… å­—é¢é‡è¿›å…¥ | âœ… æ„é€ å‡½æ•°åˆ›å»º | å­—é¢é‡è§¦å‘å¸¸é‡æ± æ“ä½œ |
| `x + "b"` | 1ä¸ª | âŒ ä¸æ¶‰åŠ | âœ… toString()åˆ›å»º | æ— å­—é¢é‡ï¼Œç›´æ¥char[]æ„é€  |
| `"ab"` | 1ä¸ª | âœ… å­—é¢é‡è¿›å…¥ | âŒ ä¸åˆ›å»º | ç›´æ¥ä½¿ç”¨å¸¸é‡æ±  |

## ğŸ¯ **æ ¸å¿ƒåŸç†**

### **ä¸ºä»€ä¹ˆ `new String("ab")` ä¼šæ“ä½œå¸¸é‡æ± ï¼Ÿ**
```java
// ç¼–è¯‘æ—¶ï¼Œå­—é¢é‡ "ab" è¢«è¯†åˆ«å¹¶å‡†å¤‡æ”¾å…¥å¸¸é‡æ± 
String s = new String("ab");
//                    â†‘
//                  å­—é¢é‡è§¦å‘å¸¸é‡æ± æ“ä½œ
```

### **ä¸ºä»€ä¹ˆ `x + "b"` ä¸ä¼šæ“ä½œå¸¸é‡æ± ï¼Ÿ**
```java
// ç¼–è¯‘æ—¶è½¬æ¢ä¸º StringBuilder æ“ä½œï¼Œæ²¡æœ‰ç”Ÿæˆå­—é¢é‡ "ab"
String s = x + "b";
// ç­‰æ•ˆäºï¼š
String s = new StringBuilder().append(x).append("b").toString();
//                                                    â†‘
//                                          ç›´æ¥ä»char[]æ„é€ ï¼Œæ— å­—é¢é‡
```

## âœ… **æœ€ç»ˆç­”æ¡ˆ**

**ä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼Œä½†é€‚ç”¨åœºæ™¯ä¸åŒï¼š**

1. **`new String("å­—é¢é‡")` â†’ ä¸¤ä¸ªå¯¹è±¡**ï¼šå­—é¢é‡è¿›å¸¸é‡æ±  + å †ä¸­åˆ›å»ºå¯¹è±¡
2. **`å˜é‡æ‹¼æ¥` â†’ ä¸€ä¸ªå¯¹è±¡**ï¼šåªåœ¨å †ä¸­åˆ›å»ºï¼Œå› ä¸ºæ²¡æœ‰å­—é¢é‡å‚ä¸

**å…³é”®åœ¨äºæ˜¯å¦æœ‰å­—ç¬¦ä¸²å­—é¢é‡ç›´æ¥å‚ä¸åˆ›å»ºè¿‡ç¨‹ï¼**