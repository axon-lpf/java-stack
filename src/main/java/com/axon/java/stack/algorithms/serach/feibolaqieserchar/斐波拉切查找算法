斐波那契查找算法是一种基于斐波那契数列的查找算法。它通过使用斐波那契数来确定每一步分割的位置，以便更接近目标元素。由于斐波那契数列在较大数据集下具有较好的分割性能，所以它在特定情况下比二分查找更有效。下面解释其公式和推导过程。

斐波那契查找算法公式的来源

斐波那契查找的核心思想是通过斐波那契数列确定查找范围，以缩小查找区间。斐波那契查找使用斐波那契数列的性质来确定查找时的分割点。假设我们有一个有序数组  arr  需要查找的元素为  key ，左、右边界分别为  left  和  right 。

斐波那契数列定义

斐波那契数列是一个递归数列，每一个数字都是前两个数字之和：

F(n) = F(n-1) + F(n-2)

其中  F(0) = 0 ,  F(1) = 1 ,  F(2) = 1 ,  F(3) = 2 , …

斐波那契数列的值增长很快，所以它在分割较大数据集时可以形成合理的区间。

斐波那契查找的步骤

	1.	找到合适的斐波那契数：
	•	斐波那契查找的第一步是找到一个足够大的斐波那契数  F(k) ，使得  F(k) - 1  大于或等于数组的长度  n 。这样可以确保我们在查找时不会越界。
	2.	定义分割点：
	•	将查找位置放在  F(k-1) - 1  的位置（斐波那契数列的倒数第二个位置）。
	•	在这种分割方式下，将数组分成前半部分（长度  F(k-1) ）和后半部分（长度  F(k-2) ）。
	3.	递归分割：
	•	如果目标值小于当前分割位置的元素，则继续在前半部分（长度为  F(k-1)  的部分）中查找，新的查找长度为  F(k-1) ，此时  k  变为  k-1 。
	•	如果目标值大于当前分割位置的元素，则继续在后半部分（长度为  F(k-2)  的部分）中查找，新的查找长度为  F(k-2) ，此时  k  变为  k-2 。
	•	重复上述步骤，直到找到目标值或数组长度缩小到 0。

公式推导

根据上述过程，斐波那契查找可以用以下公式来确定每次分割的位置：

mid = left + F(k-1) - 1


	•	其中  left  是当前查找区间的起点， F(k-1) - 1  表示在当前查找范围内按斐波那契数列比例分割的位置。

斐波那契查找的特点

	•	时间复杂度：平均情况下为  O(\log n) ，因为每次查找的范围缩小比例大约为黄金分割点（ \frac{\sqrt{5} - 1}{2} ）。
	•	空间复杂度： O(1) ，因为只需记录几个斐波那契数。

总结

斐波那契查找算法之所以有效，是因为斐波那契数列的增长符合黄金分割点的特性，可以更接近目标值的位置。